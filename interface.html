<!-- === INTERFACE PRINCIPALE === -->
<!-- Barre de contrôle en haut de l'écran -->
<div id="div_cartouche" style="margin: 0;">
    <!-- Sélection du personnage/joueur -->
    <label for="joueur">Perso :&nbsp;</label>
    <select id="joueur">
        <option value="">--</option>
        <option value="MJ">Maitre du Jeu</option>
    </select>

    <!-- Bouton pour lancer 3 dés à 6 faces -->
    <button id="3D6">3D6</button>

    <!-- Champ pour lancer des dés personnalisés (format: XdY+Z) -->
    <input type="text" id="personnalisation" style="width: 80px;" placeholder="prompt...">
</div>

<!-- === ZONE DE DIALOGUE === -->
<!-- Table pour afficher les conversations entre joueurs -->
<table id="table_dialogue" style="width: 98%; border: 0; margin: 0;">
    <tr id="titre_dialogue"></tr> <!-- En-têtes des colonnes de dialogue -->
    <tr id="dialogue"></tr> <!-- Contenu des dialogues -->
</table>
<!-- === ZONE DE COMBAT === -->
<!-- Interface de combat (masquée par défaut) -->
<div id="combat" style="width: 97.8%; display: none; position: relative;">
    <!-- Barre d'outils pour la gestion de la carte -->
    <div id="div_tools" class="titre_dialogue"
        style="display: flex; align-items: center; margin: 0; background-color: white; justify-content: space-between;">

        <!-- Outils de terrain et formes -->
        <div style="width: 500px; display: flex; align-items: center; margin: 4px; background-color: white; justify-content: space-between;">
            <!-- Outils de terrain -->
            Terrains :&nbsp;
            <img id="rocher" src="images/Rocher.png" onclick="Terrain.set_terrain('rocher');" alt="Rocher"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="arbre" src="images/Arbre.png" onclick="Terrain.set_terrain('arbre');" alt="Arbre"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="eau" src="images/Eau.png" onclick="Terrain.set_terrain('eau');" alt="Eau"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="gomme_t" src="images/Gomme.png" onclick="Terrain.set_terrain('gomme');" alt="Gomme"
                style="width: 30px; height: 30px; cursor: pointer;">
            &nbsp;&nbsp;&nbsp;
            <!-- Outils de formes géométriques -->
            Formes :&nbsp;
            <input type="color" id="forme_color" value="#000000" style="width: 20px; height: 20px;">
            <img id="rectangle" src="images/Rectangle.png" onclick="Forme.setFormeMode('rectangle');" alt="Rectangle"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="ellipse" src="images/Ellipse.png" onclick="Forme.setFormeMode('ellipse');" alt="Ellipse"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="mur" src="images/Mur.png" onclick="Forme.setFormeMode('mur');" alt="Mur"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="scission" src="images/Scission.png" onclick="Forme.setFormeMode('scission');" alt="Scission"
                style="width: 30px; height: 30px; cursor: pointer;">
            <img id="gomme_f" src="images/Gomme.png" onclick="Forme.setFormeMode('gomme');" alt="Gomme"
                style="width: 30px; height: 30px; cursor: pointer;">
        </div>

        <!-- Outils de gestion de carte -->
        <div>
            <form id="upload_fond" enctype="multipart/form-data">
                <label for="img_fond" id="fond">Fond de carte</label>
                <input type="file" id="img_fond" accept="image/*" name="image" style="display: none;">
                <button id="synchroniser">Synchroniser</button>
            </form>
        </div>
    </div>

    <!-- Canvas principal pour la carte hexagonale -->
    <canvas id="hexCanvas" tabindex="0"
        style="position: absolute; width: 100%; height: auto; margin: 0; border: 1px solid black; cursor: default;"></canvas>

    <!-- Canvas pour l'affichage des éléments sélectionnés (superposé) -->
    <canvas id="hexCanvas_selected" tabindex="0"
        style="position: absolute; display: none; width: 100%; height: auto; margin: 0; border: 0; opacity: 0.5; pointer-events: none;"></canvas>
</div>

<!-- === DIALOGUE DE DIMENSION DE CARTE === -->
<!-- Fenêtre pour définir les dimensions de la carte de combat -->
<dialog id="dialog_dim_carte">
    <table style="margin: 0; font-size: x-large;">
        <tr>
            <td>Largeur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="largeur" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td>Hauteur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="hauteur" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="width: 100%; text-align: right;">
                    <button id="Valider" style="font-size: x-large;">Valider</button>
                </div>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE CRÉATION DE RECTANGLE === -->
<!-- Fenêtre pour créer une forme rectangulaire -->
<dialog id="dialog_dim_rectangle">
    <table style="margin: 0; font-size: x-large;">
        <tr>
            <td>Largeur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="largeur" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td>Hauteur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="hauteur" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="width: 100%; text-align: right;">
                    <button id="Creer" style="font-size: x-large;">Créer</button>
                    <button id="Fermer" style="font-size: x-large;">Fermer</button>
                </div>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE CRÉATION DE MUR === -->
<!-- Fenêtre pour créer une forme mur -->
<dialog id="dialog_dim_mur">
    <table style="margin: 0; font-size: x-large;">
        <tr>
            <td>Largeur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="largeur" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td>Hauteur (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="hauteur" style="width: 45px; font-size: x-large;" value="0.5"></td>
        </tr>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="width: 100%; text-align: right;">
                    <button id="Creer" style="font-size: x-large;">Créer</button>
                    <button id="Fermer" style="font-size: x-large;">Fermer</button>
                </div>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE CRÉATION D'ELLIPSE === -->
<!-- Fenêtre pour créer une forme elliptique -->
<dialog id="dialog_dim_ellipse">
    <table style="margin: 0; font-size: x-large;">
        <tr>
            <td>Grand axe (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="grand_axe" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td>Petit axe (en m) :&nbsp;</td>
            <td> </td>
            <td><input type="text" class="petit_axe" style="width: 45px; font-size: x-large;"></td>
        </tr>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="width: 100%; text-align: right;">
                    <button id="Creer" style="font-size: x-large;">Créer</button>
                    <button id="Fermer" style="font-size: x-large;">Fermer</button>
                </div>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE SÉLECTION DE MODÈLE === -->
<!-- Fenêtre pour choisir le modèle de personnage à placer sur la carte -->
<dialog id="dialog_details_1">
    <span style="font-size: x-large;">Modèle :&nbsp;</span>
    <select id="model" style="font-size: x-large;">
        <option value="">--</option>
    </select>
    <!-- Coordonnées de placement (masquées) -->
    <input type="text" id="col" style="display: none;">
    <input type="text" id="row" style="display: none;">
    <hr>
    <div style="width: 100%; text-align: right;">
        <button id="Fermer" style="font-size: x-large;">Fermer</button>
    </div>
</dialog>
<!-- === DIALOGUE DE DÉTAILS DE PERSONNAGE === -->
<!-- Fenêtre complète pour modifier les propriétés d'un personnage -->
<dialog id="dialog_details_2">
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
        </colgroup>
        <tr>
            <td>Nom :&nbsp;</td>
            <td colspan="12"><input type="text" style="width: 99.5%;" class="titre"></td>
        </tr>
        <tr>
            <td>Modèle :&nbsp;</td>
            <td><span class="model"></span><span class="indice"></span></td>
            <td>&nbsp;</td>
            <td>Allié :&nbsp;</td>
            <td>
                <label class="switch">
                    <input type="checkbox" class="type">
                    <span class="slider"></span>
                </label>
            </td>
            <td>&nbsp;</td>
            <td>Fatigue :&nbsp;</td>
            <td><input type="text" class="fatigue" style="text-align: center;"></td>
            <td><span class="fatigue"></span></td>
            <td>&nbsp;</td>
            <td>Concentration :&nbsp;</td>
            <td><input type="text" class="concentration" style="text-align: center;"></td>
            <td><span class="concentration"></span></td>
        </tr>
    </table>
    <hr>
    <textarea class="note" rows="3" style="width: 99.5%; resize: vertical; font-size: x-large;"
        placeholder="Note..."></textarea>
    <hr>
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
        </colgroup>
        <tr>
            <td></td>
            <td>Vie</td>
            <td></td>
            <td>Armure</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Général :&nbsp;</td>
            <td><input type="text" class="pdv" style="text-align: center;"></td>
            <td><span class="pdv"></span></td>
            <td style="text-align: center;"><input type="text" class="armure" style="text-align: center;" disabled></td>
            <td></td>
            <td colspan="2">Bonus Feinte de corps :&nbsp;</td>
            <td><input type="text" class="b_fdc" style="text-align: center;">&nbsp;</td>
            <td></td>
            <td>Auto :&nbsp;</td>
            <td>
                <label class="switch">
                    <input type="checkbox" class="auto">
                    <span class="slider"></span>
                </label>
            </td>
        </tr>
        <tr>
            <td>Tête :&nbsp;</td>
            <td><input type="text" class="tete" style="text-align: center;"></td>
            <td> <span class="tete"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_tete" style="text-align: center;"></td>
            <td></td>
            <td colspan="2">Bonus Initiative :&nbsp;</td>
            <td><input type="text" class="b_ini" style="text-align: center;">&nbsp;</td>
            <td> </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Bras Gauche :&nbsp;</td>
            <td><input type="text" class="brasg" style="text-align: center;"></td>
            <td> <span class="brasg"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_brasg" style="text-align: center;"></td>
            <td></td>
            <td colspan="2">Bonus Attaque :&nbsp;</td>
            <td><input type="text" class="b_att" style="text-align: center;">&nbsp;</td>
            <td> </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Bras Droit :&nbsp;</td>
            <td><input type="text" class="brasd" style="text-align: center;"></td>
            <td> <span class="brasd"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_brasd" style="text-align: center;"></td>
            <td></td>
            <td colspan="2">Bonus Dommage :&nbsp;</td>
            <td><input type="text" class="b_dom" style="text-align: center;">&nbsp;</td>
            <td> </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Poitrine :&nbsp;</td>
            <td><input type="text" class="poitrine" style="text-align: center;"></td>
            <td> <span class="poitrine"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_poitrine" style="text-align: center;"></td>
            <td></td>
            <td colspan="2">Bonus Défense :&nbsp;</td>
            <td><input type="text" class="b_def" style="text-align: center;">&nbsp;</td>
            <td> </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Abdomen :&nbsp;</td>
            <td><input type="text" class="abdomen" style="text-align: center;"></td>
            <td> <span class="abdomen"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_abdomen" style="text-align: center;"></td>
            <td> </td>
            <td colspan="2">Arme principale :&nbsp;</td>
            <td colspan="4">
                <select class="arme1" style="font-size: x-large;">
                    <option value="Lancement de sort">Lancement de sort</option>
                    <option value="">--</option>
                </select>
                <span class="info_principale"></span>
        </tr>
        <tr>
            <td>Jambe Gauche :&nbsp;</td>
            <td><input type="text" class="jambeg" style="text-align: center;"></td>
            <td> <span class="jambeg"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_jambeg" style="text-align: center;"></td>
            <td> </td>
            <td>
                <span class="titre_liste">Liste :&nbsp;</span>
                <span class="titre_arme2">Arme secondaire :&nbsp;</span>
            </td>
            <td colspan="5">
                <select class="arme2" style="font-size: x-large;">
                    <option value="">--</option>
                </select>
                <span class="info_secondaire"></span>
                <span class="liste"></span>
            </td>
        </tr>
        <tr>
            <td>Jambe Droite :&nbsp;</td>
            <td><input type="text" class="jambed" style="text-align: center;"></td>
            <td> <span class="jambed"></span></td>
            <td style="text-align: center;"><input type="text" class="armure_jambed" style="text-align: center;"></td>
            <td> </td>
            <td><span class="titre_sort">Sort :&nbsp;</span></td>
            <td colspan="5"><span class="sort"></span></td>
        </tr>
    </table>
    <div style="width: 100%; text-align: right;">
        <button id="Fermer" style="font-size: x-large;">Fermer</button>
        <button id="Dupliquer" style="font-size: x-large;">Dupliquer</button>
    </div>
</dialog>

<!-- === DIALOGUE DE CHOIX D'ARME D'ATTAQUE === -->
<!-- Fenêtre pour choisir l'arme à utiliser lors d'une attaque -->
<dialog id="dialog_attaque_1">
    <h1 class="nom"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(255, 64, 64);"></h1>
    <table>
        <tr>
            <td rowspan="3">
                <p style="font-size: x-large; text-align: center;">Arme à utiliser </p>
            </td>
            <td>
                <input type="radio" name="arme" value="1" class="arme_radio1">
                <span class="main1" style="font-size: x-large;">1ère main (...)</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="arme" value="2" class="arme_radio2">
                <span class="main2" style="font-size: x-large;">2nde main (...)</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="arme" value="0" class="arme_radio0">
                <span style="font-size: x-large;">Aucune</span>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE JET D'ATTAQUE === -->
<!-- Fenêtre pour afficher le jet de dés et le score d'attaque -->
<dialog id="dialog_attaque_2" style="width: fit-content;">
    <h1 class="nom"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(255, 64, 64);"></h1>
    <table style="width: 100%; border-collapse: collapse;">
        <colgroup>
            <col style="width: 17%;">
            <col style="width: 17%;">
            <col style="width: 17%;">
            <col style="width: 17%;">
            <col style="width: 17%;">
            <col style="width: 17%;">
        </colgroup>

        <tr>
            <td colspan="2" style="text-align: left;">
                <span style="font-size: x-large;">Jet de dés :&nbsp;</span>
                <input type="text" class="jet_des" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
            <td colspan="2" style="text-align: left;">
                <span style="font-size: x-large;">Feinte de corps :&nbsp;</span>
                <input type="text" class="fdc_def" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
            <td colspan="2" style="text-align: right;">
                <span style="font-size: x-large;">Score d'attaque :&nbsp;</span>
                <input type="text" class="scr_att" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
        </tr>
        <tr>
            <td colspan="6">
                <hr>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2">
                <span style="font-size: x-large;">Malus à la feinte de corps :&nbsp;</span>
            </td>
            <td colspan="2">
                <input type="checkbox" class="surprise_totale">
                <span style="font-size: x-large;">Surprise totale (0)</span>
            </td>
            <td colspan="2">
                <input type="checkbox" class="immobile">
                <span style="font-size: x-large;">Immobile (0)</span>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2" rowspan="2">
                <span style="font-size: x-large;">Variation MJ :&nbsp;</span>
                <input type="text" class="var_mj" style="font-size: x-large; width: 35px; text-align: center;">
            </td>
            <td colspan="2">
                <input type="checkbox" class="aveugle">
                <span style="font-size: x-large;">Aveuglé (-2)</span>
            </td>
            <td colspan="2">
                <input type="checkbox" class="surprise_partielle">
                <span style="font-size: x-large;">Surprise partielle (-2)</span>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2">
                <input type="checkbox" class="autre_action">
                <span style="font-size: x-large;">Autre action (-2)</span>
            </td>
            <td colspan="2">
                <input type="checkbox" class="gene_mouvements">
                <span style="font-size: x-large;">gêné dans ses mouvements (-2)</span>
            </td>
        </tr>
        <tr>
            <td colspan="6">
                <hr>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2">
                <span style="font-size: x-large;">Ciblage des zones :&nbsp;</span>
            </td>
            <td colspan="2" style="text-align: center;">
                <input type="checkbox" class="tete">
                <span style="font-size: x-large;">Tête</span>
            </td>
            <td colspan="2">
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2" rowspan="2" style="text-align: center;">
                <input type="checkbox" class="brasg">
                <span style="font-size: x-large;">Bras gauche</span>
            </td>
            <td colspan="2" style="text-align: center;">
                <input type="checkbox" class="poitrine">
                <span style="font-size: x-large;">Poitrine</span>
            </td>
            <td colspan="2" rowspan="2" style="text-align: center;">
                <input type="checkbox" class="brasd">
                <span style="font-size: x-large;">Bras droit</span>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="2" style="text-align: center;">
                <input type="checkbox" class="abdomen">
                <span style="font-size: x-large;">Abdomen</span>
            </td>
        </tr>
        <tr style="height: 30px;">
            <td colspan="3" style="text-align: center;">
                <input type="checkbox" class="jambeg">
                <span style="font-size: x-large;">Jambe gauche</span>
            </td>
            <td colspan="3" style="text-align: center;">
                <input type="checkbox" class="jambed">
                <span style="font-size: x-large;">Jambe droite</span>
            </td>
        </tr>
        <tr>
            <td colspan="6">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="3" style="text-align: left;">
                <button class="pt_chance" style="font-size: x-large;">Point de chance</button>
            </td>
            <td colspan="3" style="text-align: right;">
                <button class="accepter" style="font-size: x-large;">Accepter</button>
            </td>
        </tr>
    </table>
    <div class="tooltip" style="pointer-events: none; display: none;"></div>
</dialog>

<!-- === DIALOGUE DE LOCALISATION D'ATTAQUE === -->
<!-- Fenêtre pour choisir la zone corporelle ciblée par l'attaque -->
<dialog id="dialog_attaque_3" style="width: fit-content;">
    <h1 class="nom"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(255, 64, 64);"></h1>
    <table style="width: 100%; border-collapse: collapse;">
        <colgroup>
            <col style="width: 50%;">
            <col style="width: 50%;">
        </colgroup>
        <tr>
            <td style="text-align: left;">
                <span style="font-size: x-large;">Jet de dés :&nbsp;</span>
                <input type="text" class="jet_des" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
            <td style="text-align: right;">
                <span style="font-size: x-large;">Score d'attaque :&nbsp;</span>
                <input type="text" class="scr_att" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <hr>
            </td>
        </tr>
        <tr>
            <td rowspan="7" style="text-align: left;">
                <span style="font-size: x-large;">Localisation :&nbsp;</span>
            </td>
            <td style="display: none;">
                <input type="radio" name="loc" value="tête" class="tete_rd">
                <span class="tete" style="font-size: x-large;">Tête</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="poitrine" class="poitrine_rd">
                <span class="poitrine" style="font-size: x-large;">Poitrine</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="abdomen" class="abdomen_rd">
                <span class="abdomen" style="font-size: x-large;">Abdomen</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="bras gauche" class="brasg_rd">
                <span class="brasg" style="font-size: x-large;">Bras gauche</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="bras droit" class="brasd_rd">
                <span class="brasd" style="font-size: x-large;">Bras droit</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="jambe gauche" class="jambeg_rd">
                <span class="jambeg" style="font-size: x-large;">Jambe gauche</span>
            </td>
        </tr>
        <tr>
            <td style="display: none;">
                <input type="radio" name="loc" value="jambe droite" class="jambed_rd">
                <span class="jambed" style="font-size: x-large;">Jamble droite</span>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <hr>
            </td>
        </tr>
        <tr>
            <td style="text-align: left;">
                <button class="pt_chance" style="font-size: x-large;">Point de chance</button>
            </td>
            <td style="text-align: right;">
                <button class="accepter" style="font-size: x-large;">Accepter</button>
            </td>
        </tr>
    </table>
    <div class="tooltip" style="pointer-events: none; display: none;"></div>
</dialog>

<!-- === DIALOGUE DE CHOIX DE DÉFENSE === -->
<!-- Fenêtre pour choisir le type de défense (parade/esquive) -->
<dialog id="dialog_defense_1">
    <h1 class="nom"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 64, 255);"></h1>
    <table>
        <tr>
            <td rowspan="4">
                <p style="font-size: x-large; text-align: center;">Défense </p>
            </td>
            <td>
                <input type="radio" name="defense" value="pr1" class="arme_radio1">
                <span class="main1" style="font-size: x-large;">Parade 1ère main (...)</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="defense" value="pr2" class="arme_radio2">
                <span class="main2" style="font-size: x-large;">Parade 2nde main (...)</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="defense" value="esq" class="arme_radio3">
                <span style="font-size: x-large;">Esquive</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="defense" value="" class="arme_radio0">
                <span style="font-size: x-large;">Aucune</span>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE RÉSOLUTION DE DÉFENSE === -->
<!-- Fenêtre pour afficher le résultat de la défense et les dommages -->
<dialog id="dialog_defense_2" style="width: fit-content;">
    <h1 class="nom"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 64, 255);"></h1>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td rowspan="2" style="text-align: left;">
                <span style="font-size: x-large;"> Jet de dés :&nbsp;</span>
                <input type="text" class="jet_des" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
            <td style="text-align: right;">
                <span style="font-size: x-large;">Score d'attaque :&nbsp;</span>
                <input type="text" class="scr_att" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
        </tr>
        <tr>
            <td style="text-align: right;">
                <span style="font-size: x-large;">Score de défense :&nbsp;</span>
                <input type="text" class="scr_def" style="font-size: x-large; width: 35px; text-align: center;"
                    disabled>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <hr>
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center;">
                <span class="dommages" style="font-size: x-large;"></span>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <hr>
            </td>
        </tr>
        <tr>
            <td style="text-align: left;">
                <button class="pt_chance" style="font-size: x-large;">Point de chance</button>
            </td>
            <td style="text-align: right;">
                <button class="accepter" style="font-size: x-large;">Accepter</button>
            </td>
        </tr>

    </table>
    <div class="tooltip" style="pointer-events: none; display: none;"></div>
</dialog>

<!-- === ÉLÉMENTS D'INTERFACE SUPPLÉMENTAIRES === -->
<!-- Tooltip pour afficher des informations contextuelles -->
<div id="tooltip" class="tooltip" style="pointer-events: none; display: none;"></div>

<!-- Popup pour afficher des messages temporaires -->
<div class="popup" id="popup"></div>

<!-- === MODALE DU DIAGRAMME DE MAGIE === -->
<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Diagramme de Magie</h2>
        <div class="conteneur">
            <img src="images/Diagramme_de_magie.png" alt="Diagramme de Magie" class="modal-image">
            <div class="arrow-label arrow-label-top">
                <button id="Harmonie" class="magic-button">Harmonie</button>
                <button id="Eau" class="magic-button">Eau</button>
            </div>
            <div class="arrow-label arrow-label-top-right">
                <button id="Controle" class="magic-button">Contrôle de soi</button>
                <button id="Detections" class="magic-button">Détections</button>
            </div>
            <div class="arrow-label arrow-label-right">
                <button id="Illusions" class="magic-button">Illusions</button>
                <button id="Esprits" class="magic-button">Maîtrise des esprits</button>
            </div>
            <div class="arrow-label arrow-label-bottom-right">
                <button id="Terre" class="magic-button">Terre</button>
                <button id="Isolement" class="magic-button">Isolement</button>
            </div>
            <div class="arrow-label arrow-label-bottom">
                <button id="Feu" class="magic-button">Feu</button>
                <button id="Froid" class="magic-button">Froid</button>
            </div>
            <div class="arrow-label arrow-label-bottom-left">
                <button id="Air" class="magic-button">Air</button>
                <button id="Lumiere" class="magic-button">Lumière - Electricité</button>
            </div>
            <div class="arrow-label arrow-label-left">
                <button id="Metamorphoses" class="magic-button">Métamorphoses</button>
                <button id="Surnaturelles" class="magic-button">Créatures surnaturelles</button>
            </div>
            <div class="arrow-label arrow-label-top-left">
                <button id="Nature" class="magic-button">Nature</button>
                <button id="Magie" class="magic-button">Magie pure</button>
            </div>
        </div>
    </div>
</div>

<!-- === DIALOGUE DE PARAMÈTRAGE D'UN SORT === -->
<!-- Fenêtre pour choisir les paramètres d'un sort (fatigue, concentration) -->
<dialog id="dialog_sort_1" style="font-size: x-large; white-space: nowrap;">
    <h1 class="nom_liste"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 255, 64);"></h1>
    <h1 class="nom_sort"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 255, 64);"></h1>
    <hr>
    <div style="width: 100%; display: flex; justify-content: space-between;">
        <div>
            Fatigue :&nbsp;
            <input type="text" class="fatigue_actuelle" style="width: 35px; text-align: center; font-size: x-large;"
                disabled>
            / <span class="fatigue_max">00</span>
        </div>
        <div>
            Concentration :&nbsp;
            <input type="text" class="concentration_actuelle"
                style="width: 35px; text-align: center; font-size: x-large;" disabled>
            / <span class="concentration_max">00</span>
        </div>
    </div>
    <hr>
    <table style="width: 100%;">
        <tr>
            <td rowspan="5">Amplification :&nbsp;&nbsp;</td>
            <td>
                <input type="radio" name="sort" value="1" class="sort_radio1">
                <span class="sort_normal">Sort normal</span>&nbsp;&nbsp;
            </td>
            <td colspan="2"></td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="sort" value="2" class="sort_radio2">
                <span class="sort_double">Sort doublé</span>&nbsp;&nbsp;
            </td>
            <td colspan="2"></td>
        </tr>
        <tr>
            <td>
                <input type="radio" name="sort" value="3" class="sort_radio3">
                <span class="sort_triple">Sort triplé</span>&nbsp;&nbsp;
            </td>
            <td colspan="2"></td>
        </tr>
        <tr>
            <td rowspan="2">
                <input type="radio" name="sort" value="0" class="sort_radio0">
                <span class="sort_specifique">Spécifique :</span>&nbsp;&nbsp;
            </td>
            <td>
                Fatigue :&nbsp;
            </td>
            <td>
                <input type="text" class="fatigue_cout" style="width: 35px; text-align: center; font-size: x-large;">
            </td>
        </tr>
        <tr>
            <td>
                Concentration :&nbsp;
            </td>
            <td>
                <input type="text" class="concentration_cout"
                    style="width: 35px; text-align: center; font-size: x-large;">
            </td>
        </tr>
        <tr>
            <td colspan="4" style="text-align: right;">
                <hr>
                <button class="acter" style="font-size: x-large;">Acter</button>
            </td>
        </tr>
    </table>
</dialog>

<!-- === DIALOGUE DE CONFIRMATION DE LANCEMENT D'UN SORT === -->
<!-- Fenêtre pour confirmer le lancement d'un sort -->
<dialog id="dialog_sort_2" style="font-size: x-large; white-space: nowrap;">
    <h1 class="nom_liste"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 255, 64);"></h1>
    <h1 class="nom_sort"
        style="text-align: center; padding: 0; margin: 0; line-height: 1.5; background-color: rgb(64, 255, 64);"></h1>
    <!-- Coût du sort -->
    <div style="display: flex; align-items: center;">
        <hr style="width: 15px; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
        <span>&nbsp;&nbsp;Coût&nbsp;&nbsp;</span>
        <hr style="flex: 1; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
    </div>
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 75px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
        </colgroup>
        <tr>
            <td></td>
            <td>Fatigue :&nbsp;</td>
            <td><input type="text" class="fatigue_cout" style="width: 35px; text-align: center; font-size: x-large;"
                    disabled>
            </td>
            <td></td>
            <td>Concentration :&nbsp;</td>
            <td><input type="text" class="concentration_cout"
                    style="width: 35px; text-align: center; font-size: x-large;" disabled>
        </tr>
    </table>
    <!-- Sauvegarde contre le sort -->
    <div style="display: flex; align-items: center;">
        <hr style="width: 15px; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
        <span>&nbsp;&nbsp;Sauvegarde&nbsp;&nbsp;</span>
        <hr style="flex: 1; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
    </div>
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 75px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
        </colgroup>
        <tr>
            <td></td>
            <td>Prompt :&nbsp;</td>
            <td>
                <input type="text" class="prompt_save" style="width: 120px; font-size: x-large;">
                <span class="res_save">Aucune</span>
            </td>
            <td></td>
        </tr>
    </table>
    <!-- Dégâts occasionnés par le sort -->
    <div style="display: flex; align-items: center;">
        <hr style="width: 15px; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
        <span>&nbsp;&nbsp;Dégâts&nbsp;&nbsp;</span>
        <hr style="flex: 1; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
    </div>
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 75px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
        </colgroup>
        <tr>
            <td></td>
            <td>Prompt :&nbsp;</td>
            <td>
                <input type="text" class="prompt_degats" style="width: 120px; font-size: x-large;">
                <span class="res_degats">Aucun</span>
            </td>
            <td></td>
            <td><input type="radio" name="radio_degats" value="0" class="degats_radio0" checked>
                <span class="degats_gen">Dégâts généraux</span>
            </td>
            <td></td>
            <td><input type="radio" name="radio_degats" value="1" class="degats_radio1">
                <span class="degats_loc">Dégâts localisés</span>
            </td>
        </tr>
    </table>
    <!-- Bonus engendrés par le sort -->
    <div style="display: flex; align-items: center;">
        <hr style="width: 15px; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
        <span>&nbsp;&nbsp;Bonus&nbsp;&nbsp;</span>
        <hr style="flex: 1; margin: 0; border: none; border-top: 1px solid; vertical-align: middle;">
    </div>
    <table style="width: 100%; margin: 0; white-space: nowrap; border-collapse: collapse; font-size: x-large;">
        <colgroup>
            <col style="width: 75px;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
            <col style="width: auto;">
            <col style="width: 1px;">
            <col style="width: 1px;">
        </colgroup>
        <tr>
            <td></td>
            <td></td>
            <td>Armure</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
        <tr>
            <td></td>
            <td>Tête :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_tete" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
            <td>Feinte de corps :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="b_fdc"
                    style="width: 35px; text-align: center; font-size: x-large;"></td>
            <td>&nbsp;</td>
            <td>Initiative :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="b_ini"
                    style="width: 35px; text-align: center; font-size: x-large;"></td>
        </tr>
        <tr>
            <td></td>
            <td>Bras Gauche :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_brasg" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
            <td>Attaque :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="b_att"
                    style="width: 35px; text-align: center; font-size: x-large;"></td>
            <td>&nbsp;</td>
            <td>Dommage :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="b_dom"
                    style="width: 35px; text-align: center; font-size: x-large;"></td>
        </tr>
        <tr>
            <td></td>
            <td>Bras Droit :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_brasd" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
            <td>Défense :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="b_def"
                    style="width: 35px; text-align: center; font-size: x-large;"></td>
        </tr>
        <tr>
            <td></td>
            <td>Poitrine :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_poitrine" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td></td>
            <td>Abdomen :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_abdomen" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td></td>
            <td>Jambe Gauche :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_jambeg" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td></td>
            <td>Jambe Droite :&nbsp;</td>
            <td style="text-align: center;"><input type="text" class="armure_jambed" style="width: 35px; font-size: x-large; text-align: center;"></td>
            <td>&nbsp;</td>
        </tr>
    </table>

    <!-- Bouton pour appliquer le sort -->
    <hr>
    <div style="width: 100%; text-align: right;">
        <button id="Appliquer" style="font-size: x-large;">Appliquer</button>
    </div>

</dialog>